<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>买卖股票的最佳时机</title>
</head>

<body>
    <script>
        //解法1:动态规划
        // 时n空1
        let maxProfit = function (prices) {
            let max = 0,
                minprice = prices[0]
            for (let i = 1; i < prices.length; i++) {
                minprice = Math.min(prices[i], minprice)
                max = Math.max(max, prices[i] - minprice)
            }
            return max
        }

        //解法2:快慢指针
        let maxProfit1 = function (prices) {
            if (!prices || prices.length < 2) {
                return 0;
            }
            let max = 0,
                left = 0,
                right = 1,
                len = prices.length;
            while (right < len) {
                if (prices[left] < prices[right]) {
                    const m = prices[right] - prices[left];
                    max = max > m ? max : m;
                } else {
                    left = right;
                }
                right++;
            }
            return max;
        }

        let a1 = [7, 1, 5, 3, 6, 4],
            a2 = [7, 6, 4, 3, 1];
        console.log(maxProfit(a1));
        console.log(maxProfit(a2));
        console.log(maxProfit1(a1));
        console.log(maxProfit1(a2));

        // 买卖股票的最佳时期含冷冻期
        //dp[i][0] 表示第 i 天 没有持有 股票得最大利润 dp[i][1]表持有
        //dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
        //dp[i][1] = max(dp[i-1][1], dp[i-2][0] - prices[i])
        //dp[0][0] = 0    dp[0][1] = - prices[0]
        let maxProfit2 = function (prices) {
            if (!prices || prices.length <= 1) {
                return 0
            }
            const len = prices.length;
            let dp = Array.from({
                length: len
            }, () => []);
            dp[0][0] = 0;
            dp[0][1] = -prices[0];
            dp[1][0] = Math.max(0, prices[1] - prices[0]);
            dp[1][1] = Math.max(dp[0][1], dp[0][0] - prices[1]);
            for (let i = 2; i < len; i++) {
                dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
                dp[i][1] = Math.max(dp[i - 1][1], dp[i - 2][0] - prices[i]);
            }
            return dp[len - 1][0];
        };
    </script>

</body>
<!-- 
    题目：
    假设把某股票的价格按照时间先后顺序存储在数组中，请问买卖该股票一次可能获得的最大利润是多少？
 -->

</html>