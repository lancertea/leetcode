<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>格雷编码</title>
    <style>

    </style>
</head>

<body>

    <script>
        {
        var grayCode = function (n) {
            let convert = function (arr) {
                arr = arr.map(item => {
                    item = item.split("");
                    let res = 0;
                    for (let i = item.length - 1; i >= 0; i--) {
                        res += item[i] * Math.pow(2, item.length - i - 1);
                    }
                    return res;
                });
                return arr;
            };
            let make = function (n) {
                if (n === 0) {
                    return [0];
                } else if (n === 1) {
                    return ['0', '1'];
                } else {
                    let prev = make(n - 1),
                        res = [],
                        max = Math.pow(2, n) - 1;
                    for (let i = 0; i < prev.length; i++) {
                        res[i] = `0${prev[i]}`;
                        res[max - i] = `1${prev[i]}`;
                    }
                    return res;
                }
            };
            return convert(make(n));
        };

        console.log(grayCode(3));
        }

        var grayCode=function(n){
        let res=[0],
        right;
        for(let i=1;i<=n;i++){
        //这里复制了一份res，因为reverse改变原数组
        right=[...res].reverse().map(item=>item+Math.pow(2,i-1));
        res=res.concat(right);
        }
        return res;
        };
        console.log(grayCode(2));
    </script>
</body>

</html>